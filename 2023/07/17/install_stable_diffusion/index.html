<!doctype html><html lang=en><head><title>安裝 Stable Diffusion ::
TUSK — Watching things with another angle</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="近年人工智能技術急速發展，而自從 2022 年出現了 DALL·E 2 同 ChatGPT 3.5 之後， Generative AI 就成為左人工智能界嘅熱門話題。
可惜嘅係，香港自從由亂入治之後，好多新嘅高科技嘢香港都冇得用，而 OpenAI 嘅 service 都唔例外，所以 Dall-E 呢個由交字生成圖片嘅 AI 香港就未必用到啦。不過唔緊要，市場上仲有 Stable Diffusion 呢個 opensource framework 可以用，而我就決定下用 Stable Diffusion 去生產圖片。
"><meta name=keywords content="Felix,Blog,Hugo"><meta name=robots content="noodp"><link rel=canonical href=https://hang.swiftzer.net/2023/07/17/install_stable_diffusion/><link rel=stylesheet href=https://hang.swiftzer.net/assets/style.css><link rel=stylesheet href=https://hang.swiftzer.net/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://hang.swiftzer.net/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://hang.swiftzer.net/img/favicon.png><link href=https://hang.swiftzer.net/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://hang.swiftzer.net/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://hang.swiftzer.net/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://hang.swiftzer.net/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://hang.swiftzer.net/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://hang.swiftzer.net/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="安裝 Stable Diffusion"><meta name=twitter:description content="近年人工智能技術急速發展，而自從 2022 年出現了 DALL·E 2 同 ChatGPT 3.5 之後， Generative AI 就成為左人工智能界嘅熱門話題。
可惜嘅係，香港自從由亂入治之後，好多新嘅高科技嘢香港都冇得用，而 OpenAI 嘅 service 都唔例外，所以 Dall-E 呢個由交字生成圖片嘅 AI 香港就未必用到啦。不過唔緊要，市場上仲有 Stable Diffusion 呢個 opensource framework 可以用，而我就決定下用 Stable Diffusion 去生產圖片。"><meta property="og:title" content="安裝 Stable Diffusion"><meta property="og:description" content="近年人工智能技術急速發展，而自從 2022 年出現了 DALL·E 2 同 ChatGPT 3.5 之後， Generative AI 就成為左人工智能界嘅熱門話題。
可惜嘅係，香港自從由亂入治之後，好多新嘅高科技嘢香港都冇得用，而 OpenAI 嘅 service 都唔例外，所以 Dall-E 呢個由交字生成圖片嘅 AI 香港就未必用到啦。不過唔緊要，市場上仲有 Stable Diffusion 呢個 opensource framework 可以用，而我就決定下用 Stable Diffusion 去生產圖片。"><meta property="og:type" content="article"><meta property="og:url" content="https://hang.swiftzer.net/2023/07/17/install_stable_diffusion/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-17T17:45:00+08:00"><meta property="article:modified_time" content="2023-07-17T17:45:00+08:00"><meta property="og:site_name" content="TUSK"></head><body class=light-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>TUSK</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tags</a></li><ul class=menu__sub-inner><li class=menu__sub-inner-more-trigger>Show more
<span class=menu__sub-inner-more-trigger-icon><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span></li><ul class="menu__sub-inner-more hidden"><li><a href=https://twitter.com/hongkongfelix>Twitter</a></li><li><a href=https://www.flickr.com/felix-chan/>Flickr</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tags</a></li><li><a href=https://twitter.com/hongkongfelix>Twitter</a></li><li><a href=https://www.flickr.com/felix-chan/>Flickr</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>安裝 Stable Diffusion</h1><div class=post-meta><span class=post-date>2023-07-17</span>
<span class=post-author>— Written by HaNg~</span></div><span class=post-tags><a href=https://hang.swiftzer.net/tags/ai/>#AI</a>&nbsp;
<a href=https://hang.swiftzer.net/tags/stable-diffusion/>#Stable Diffusion</a>&nbsp;
<a href=https://hang.swiftzer.net/tags/generative-ai/>#Generative AI</a>&nbsp;
<a href=https://hang.swiftzer.net/tags/photo/>#photo</a>&nbsp;</span><div class=post-content><p>近年人工智能技術急速發展，而自從 2022 年出現了 <a href=https://openai.com/dall-e-2>DALL·E 2</a> 同 <a href=https://openai.com/blog/chatgpt>ChatGPT 3.5</a> 之後， <a href=https://www.nvidia.com/en-us/glossary/data-science/generative-ai/>Generative AI</a> 就成為左人工智能界嘅熱門話題。</p><p>可惜嘅係，香港自從由亂入治之後，好多新嘅高科技嘢香港都冇得用，而 <a href=https://www.cnbc.com/2023/06/12/google-openai-limit-chatbots-in-hong-kong-amid-china-tensions-report.html>OpenAI 嘅 service 都唔例外</a>，所以 Dall-E 呢個由交字生成圖片嘅 AI 香港就未必用到啦。不過唔緊要，市場上仲有 <a href=https://stability.ai/>Stable Diffusion</a> 呢個 opensource framework 可以用，而我就決定下用 Stable Diffusion 去生產圖片。</p><p>如果自己要由 <strong>0</strong> 開始去設定 Stable Diffusion，真係唔太容易。好在網絡社群已經有唔少有心人整好左唔同嘅 <a href=https://github.com/AUTOMATIC1111/stable-diffusion-webui>Stable Diffusion WebUI</a>，方便新手或者我呢類嘅懶人。呢條 link <a href=https://github.com/camenduru/stable-diffusion-webui-colab>https://github.com/camenduru/stable-diffusion-webui-colab</a> 就好好咁整合左唔同 Google Colab 嘅 <a href=https://jupyter.org/>Jupyter Notebook</a>，方便大家一 click 就可以係 Google Service 到開嚟用 Stable Diffusion WebUI。</p><p>Google Colab 用就真係好方便，可惜有<a href=https://linux-blog.anracom.com/2023/05/04/google-colab-ram-vram-and-gpu-usage-limits-i-no-clear-conditions-over-multiple-sessions/>資源限制</a>，話咁快就會用晒。我自己都有 GPU ，所以最後決定係自己部機到安裝，唔駛俾 Google 加左咁多限制。我見上網話其實係 Windows 上面都裝到，不過為左方便起見我想用番 Notebook 上面嘅 command ，所以我決定係 <a href=https://releases.ubuntu.com/18.04/>Ubuntu 18.04 LTS</a> 上面用。而安裝指令就要作出一定嘅更改。</p><p>首先進入 <a href=https://github.com/camenduru/stable-diffusion-webui-colab>https://github.com/camenduru/stable-diffusion-webui-colab</a> ，而我選擇左 <code>neverending_dream_ned_webui_colab</code> 作為我第一個 model 。</p><figure class=center><img src=github.png alt="Stable Diffusion WebUI Colab" style=border-radius:8px><figcaption class=center>Stable Diffusion WebUI Colab</figcaption></figure><p>入左去之後會開左個 <a href=https://colab.research.google.com/github/camenduru/stable-diffusion-webui-colab/blob/main/stable/neverending_dream_webui_colab.ipynb>Google Colab Notebook</a> ，因為部機已經 set 好晒，所以 apt install 個部分我就冇做，直接由第一個 pip 開始。我部機本身有個舊版嘅 CUDA ，而佢又要用 <strong>CUDA 11.8</strong> 去行 <a href=https://pytorch.org/get-started/pytorch-2.0/>PyTorch 2.0</a> ，呢到我都搞左好一段時間。記住搞好先開始 pip install。</p><figure class=center><img src=colab.png alt="Google Colab 畫面" style=border-radius:8px><figcaption class=center>Google Colab 畫面</figcaption></figure><p>基本上大部分嘅 command 都可以直接用，不過有啲地方行之前要修改一下：</p><ol><li>預設嘅檔案位置係放晒係 <code>/content</code> ，有需要嘅話自己改番你想要嘅 path</li><li>如果行唔到 <code>aria2c</code> ，可能要安裝番 <strong>aria2</strong><ul><li><code>sudo apt install -y aria2</code></li></ul></li><li>如果你嘅檔案唔係放係 <code>/content</code> ，咁你 <code>sed</code> 個兩行都要改改佢。我自己就唔熟 <code>sed</code> 所以我都係人手開番個 file 改</li></ol><p>裝好晒就行以下 command 去開 Stable Diffusion WebUI 。你見我冇左 <code>--multiple</code> 同多左
<code>--port 8800</code> ，因為自己機行到就得唔駛開個臨時 URL 去連，而我又想指定用 Port <code>8800</code> 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>python launch.py --listen --xformers --enable-insecure-extension-access --theme dark --gradio-queue --port <span style=color:#ae81ff>8800</span>
</span></span></code></pre></div><p>開完之後係 browser 打番條 link <code>http://localhost:8800</code> 就會上到 WebUI。圖片生產旅程正式開始。</p><figure class=center><img src=webui.png alt="WebUI 畫面" style=border-radius:8px><figcaption class=center>WebUI 畫面</figcaption></figure></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://hang.swiftzer.net/2023/08/06/trial_stable_diffusion/><span class=button__icon>←</span>
<span class=button__text>初嘗 Stable Diffusion</span></a></span>
<span class="button next"><a href=https://hang.swiftzer.net/2022/11/19/%E5%9F%B7%E7%9B%B8%E6%96%B0%E8%BB%9F%E4%BB%B6_Affinity_Photo/><span class=button__text>執相新軟件︰ Affinity Photo</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>TUSK</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2023 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://hang.swiftzer.net/assets/main.js></script>
<script src=https://hang.swiftzer.net/assets/prism.js></script></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-J3XEEH0Q63"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J3XEEH0Q63",{anonymize_ip:!1})}</script></body></html>